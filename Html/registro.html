<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/login.css}">
    <title>Registro</title>
</head>

<body>

<div class="container">

    <div class="login-logo">
        <img th:src="@{/images/logo.jpg}" alt="JobXpress Logo">
    </div>

    <h2>Registro</h2>
    <p class="welcome-text">¡Crea tu cuenta y forma parte de JobXpress!</p>

    <!-- Errores -->
    <div th:if="${error != null}" class="alert alert-danger">
        <p th:text="${error}"></p>
    </div>

    <form method="POST" th:action="@{/registro}">

        <div class="mb-3">
            <label>Nombre</label>
            <input type="text" name="nombre" class="form-control" required
                   th:value="${nombre}">
        </div>

        <div class="mb-3">
            <label>Apellido</label>
            <input type="text" name="apellido" class="form-control" required
                   th:value="${apellido}">
        </div>

        <div class="mb-3">
            <label>Email</label>
            <input type="email" name="email" class="form-control" required
                   th:value="${email}">
        </div>

        <div class="mb-3">
            <label>Contraseña</label>
            <input type="password" name="contrasena" class="form-control" required
                   pattern="^(?=.*[A-Z])(?=.*\\d)(?=.*[@#$%^&+=!¿?.,;:_-]).{8,}$"
                   title="Debe tener mínimo 8 caracteres, una mayúscula, un número y un signo.">
        </div>

        <div class="mb-3">
            <label>Confirmar Contraseña</label>
            <input type="password" name="contrasena_confirmation" class="form-control" required>
        </div>

        <div class="mb-3">
            <label>Teléfono</label>
            <input type="text" name="telefono" class="form-control" required
                   th:value="${telefono}">
        </div>

        <div class="mb-3">
            <label>Dirección</label>
            <input type="text" name="direccion" class="form-control" required
                   th:value="${direccion}">
        </div>

        <div class="mb-3">
            <label>Rol</label>
            <select name="id_rol" class="form-control" required>
                <option value="1" th:selected="${id_rol == 1}">Cliente</option>
                <option value="2" th:selected="${id_rol == 2}">Prestador</option>
                
            </select>
        </div>

        <button type="submit" class="btn btn-primary w-100">Registrarme</button>
    </form>

    <div class="mt-3 text-center">
        <p>¿Ya tienes cuenta?
            <a th:href="@{/login}">Inicia sesión aquí</a>
        </p>
    </div>

</div>

<script>
document.querySelector("form").addEventListener("submit", function(e) {
    const pass = document.querySelector("input[name='contrasena']").value;
    const confirm = document.querySelector("input[name='contrasena_confirmation']").value;

    if (pass !== confirm) {
        e.preventDefault();
        alert("Las contraseñas no coinciden");
    }
});
</script>

</body>
</html>
